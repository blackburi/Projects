# Saga 패턴과 마이크로서비스 아키텍처 (MSA)

## 1. 마이크로서비스 아키텍처 (MSA)
마이크로서비스 아키텍처는 애플리케이션을 작고 독립적인 서비스로 나누어 개발하는 소프트웨어 아키텍처 스타일입니다. 각 서비스는 특정 비즈니스 기능을 수행하며, 독립적으로 배포 및 확장할 수 있습니다. MSA의 주요 특징은 다음과 같습니다.

- **독립성**: 각 서비스는 독립적으로 개발, 배포, 확장 가능.
- **유연성**: 다양한 기술 스택을 사용할 수 있어 팀의 선택에 따라 최적의 기술을 적용할 수 있음.
- **확장성**: 특정 서비스만 확장할 수 있어 자원 효율적.

## 2. Saga 패턴
Saga 패턴은 분산 트랜잭션을 관리하기 위한 패턴으로, 마이크로서비스 환경에서 데이터 일관성을 유지하는 데 사용됩니다. 전통적인 트랜잭션 관리 방식이 아닌, 각 서비스가 자신의 로컬 트랜잭션을 수행하고, 이를 조정하는 방식으로 작동합니다.

### 2.1 Saga의 구성 요소
- **로컬 트랜잭션**: 각 서비스는 자신의 데이터베이스에서 로컬 트랜잭션을 수행합니다.
- **보상 트랜잭션**: 만약 어떤 서비스의 트랜잭션이 실패하면, 이전에 성공한 트랜잭션을 취소하기 위한 보상 트랜잭션이 실행됩니다.

### 2.2 Saga의 두 가지 유형
1. **오케스트레이션 (Orchestration)**:
   - 중앙 조정자가 각 서비스의 트랜잭션을 순차적으로 호출하고, 성공 여부에 따라 다음 단계를 결정합니다.
   - 예: 워크플로우 엔진을 사용하여 각 서비스의 호출을 관리.

2. **코레오그래피 (Choreography)**:
   - 각 서비스가 이벤트를 발행하고, 다른 서비스가 해당 이벤트를 구독하여 반응합니다.
   - 서비스 간의 상호작용이 느슨하게 결합되어 있어 유연성이 높습니다.

## 3. Saga 패턴의 장점
- **데이터 일관성**: 분산 환경에서도 데이터 일관성을 유지할 수 있습니다.
- **유연한 오류 처리**: 각 서비스가 독립적으로 오류를 처리할 수 있어 시스템의 복원력이 향상됩니다.
- **확장성**: 새로운 서비스 추가가 용이하여 시스템 확장이 용이합니다.

## 4. Saga 패턴의 단점
- **복잡성**: 트랜잭션 관리가 복잡해질 수 있으며, 보상 트랜잭션을 설계하는 데 추가적인 노력이 필요합니다.
- **모니터링**: 분산 시스템에서의 트랜잭션 흐름을 모니터링하고 디버깅하는 것이 어려울 수 있습니다.

## 5. 결론
Saga 패턴은 마이크로서비스 아키텍처에서 데이터 일관성을 유지하는 효과적인 방법입니다. 각 서비스가 독립적으로 운영되면서도 전체 시스템의 일관성을 보장할 수 있는 이점을 제공합니다. 그러나 복잡성과 모니터링의 어려움이 동반되므로, 적절한 설계와 도구의 사용이 필요합니다.

추가적인 질문이 있으면 언제든지 물어보세요!
